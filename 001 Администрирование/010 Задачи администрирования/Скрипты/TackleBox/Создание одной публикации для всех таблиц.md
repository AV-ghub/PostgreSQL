–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ –≤—Å–µ–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –±–∞–∑—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:

## üéØ –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

```sql
SELECT 'CREATE PUBLICATION all_tables_pub FOR TABLE ' || 
       STRING_AGG(
           quote_ident(table_schema) || '.' || quote_ident(table_name),
           ', '
           ORDER BY table_schema, table_name
       ) ||
       ' WITH (publish = ''insert, update, delete, truncate'');' as create_pub_sql
FROM information_schema.tables
WHERE table_schema NOT IN ('pg_catalog', 'information_schema')
  AND table_type = 'BASE TABLE';
```

## üîß –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–π (–µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –º–Ω–æ–≥–æ)

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (> 100), –ª—É—á—à–µ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –≥—Ä—É–ø–ø—ã:

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ö–µ–º–∞–º:
```sql
SELECT 'CREATE PUBLICATION ' || table_schema || '_pub FOR TABLE ' || 
       STRING_AGG(
           quote_ident(table_schema) || '.' || quote_ident(table_name),
           ', '
           ORDER BY table_name
       ) ||
       ' WITH (publish = ''insert, update, delete, truncate'');' as create_pub_sql
FROM information_schema.tables
WHERE table_schema NOT IN ('pg_catalog', 'information_schema')
  AND table_type = 'BASE TABLE'
GROUP BY table_schema;
```

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ 50 —Ç–∞–±–ª–∏—Ü:
```sql
WITH numbered_tables AS (
  SELECT 
    quote_ident(table_schema) || '.' || quote_ident(table_name) as full_table_name,
    (ROW_NUMBER() OVER (ORDER BY table_schema, table_name) - 1) / 50 as group_num
  FROM information_schema.tables
  WHERE table_schema NOT IN ('pg_catalog', 'information_schema')
    AND table_type = 'BASE TABLE'
)
SELECT 'CREATE PUBLICATION pub_group_' || group_num || ' FOR TABLE ' ||
       STRING_AGG(full_table_name, ', ' ORDER BY full_table_name) ||
       ' WITH (publish = ''insert, update, delete, truncate'');' as create_pub_sql
FROM numbered_tables
GROUP BY group_num
ORDER BY group_num;
```

## ‚ö° –ü—Ä—è–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)

```sql
DO $$
DECLARE
    sql_command text;
BEGIN
    SELECT 'CREATE PUBLICATION all_tables_pub FOR TABLE ' || 
           STRING_AGG(
               quote_ident(table_schema) || '.' || quote_ident(table_name),
               ', '
               ORDER BY table_schema, table_name
           ) ||
           ' WITH (publish = ''insert, update, delete, truncate'');'
    INTO sql_command
    FROM information_schema.tables
    WHERE table_schema NOT IN ('pg_catalog', 'information_schema')
      AND table_type = 'BASE TABLE';
    
    EXECUTE sql_command;
    RAISE NOTICE '–°–æ–∑–¥–∞–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è all_tables_pub';
END $$;
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü –≤ –æ–¥–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏** ‚Äî –Ω–µ—Ç —è–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞, –Ω–æ:
   - –ë–æ–ª—å—à–µ 100-200 —Ç–∞–±–ª–∏—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –≤—Å—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

2. **DDL –Ω–µ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç—Å—è** ‚Äî –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é

3. **–î–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
   ```sql
   -- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ wal_level
   ALTER SYSTEM SET wal_level = logical;
   SELECT pg_reload_conf();
   
   -- –ü—Ä–æ–≤–µ—Ä–∫–∞
   SHOW wal_level;
   ```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

```sql
-- –í—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
SELECT * FROM pg_publication;

-- –¢–∞–±–ª–∏—Ü—ã –≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
SELECT pubname, schemaname, tablename 
FROM pg_publication_tables 
ORDER BY pubname, schemaname, tablename;
```

## üí° –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–î–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–∏—Ü —Ä–µ–∫–æ–º–µ–Ω–¥—É—é:

```sql
-- 1. –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ —Å—Ö–µ–º–∞–º (—Å–∞–º—ã–π –ª–æ–≥–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥)
SELECT 'CREATE PUBLICATION pub_' || table_schema || ' FOR TABLE ' || 
       STRING_AGG(
           quote_ident(table_schema) || '.' || quote_ident(table_name),
           ', '
       ) ||
       ' WITH (publish = ''insert, update, delete, truncate'');'
FROM information_schema.tables
WHERE table_schema IN ('dbo', 'sales', 'hr') -- —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å—Ö–µ–º—ã
  AND table_type = 'BASE TABLE'
GROUP BY table_schema;
```

